version: 0.1
runson: linux
concurrency: 3
maxRetries: 1

globalTimeout: 30
testSuiteTimeout: 20
testSuiteStep: 300
jobLabel: ['SanjeetKumar', 'APE']

# Optional: enable Playwright debug logs
env:
  DEBUG: "pw:api,pw:loader"

# Pre-test setup
pre:
  - echo "ðŸ“¦ Installing dependencies..."
  - npm ci
  - echo "ðŸ§© Installing Playwright browsers..."
  - npx playwright install --with-deps
  - echo "âœ… Pre-test setup completed."

# Discover Playwright tests dynamically
testDiscovery:
  type: raw
  mode: dynamic
  command: npx playwright test --list --reporter=list

# Command to run tests
testRunnerCommand: npx playwright test

# âœ… Upload artifacts after run
uploadArtifacts:
  - name: playwright-artifacts
    path:
      - "test-results/"
      - "playwright-report/"
